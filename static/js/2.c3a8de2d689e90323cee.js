webpackJsonp([2],{Cdx3:function(e,t,a){var n=a("sB3e"),s=a("lktj");a("uqUo")("keys",function(){return function(e){return s(n(e))}})},"CtS/":function(e,t){},S5a6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),s=a.n(n),l=a("Dd8w"),i=a.n(l),o=a("NYxO"),v={name:"Custom",computed:i()({},Object(o.b)(["currentWebsite","websites"])),data:function(){return{showEventDescribe:!1,eventLoading:!0,activeName:"all",dateSelect1:"3",dateOptions1:[{value:"1",label:"今天"},{value:"3",label:"近三天"},{value:"7",label:"近七天"},{value:"30",label:"近一个月"}],allEventData:[],catEventData:[],actEventData:[],labEventData:[],showConversionDescribe:!1,conversionLoading:!0,dateSelect2:"3",dateOptions2:[{value:"1",label:"今天"},{value:"3",label:"近三天"},{value:"7",label:"近七天"},{value:"30",label:"近一个月"}],conversionData:{},conversionSelect:"",stepName:[],stepData:[]}},methods:{getEventData:function(){var e=this;this.eventLoading=!0,this.$store.dispatch("getEventData",this.dateSelect1).then(function(t){e.eventLoading=!1,e.allEventData=t.events.allEventData,e.catEventData=t.events.catEventData,e.actEventData=t.events.actEventData,e.labEventData=t.events.labEventData}).catch(function(){e.eventLoading=!1})},getConversionData:function(){var e=this;this.conversionLoading=!0,this.conversionSelect="",this.conversionData={},this.$store.dispatch("getConversionData",this.dateSelect2).then(function(t){e.conversionLoading=!1,e.conversionData=t.conversion,e.conversionSelect=s()(e.conversionData)[0]||""}).catch(function(){e.conversionLoading=!1})},calStepPer:function(e){return 0===e?100:Math.floor(1e4*this.stepData[e]/this.stepData[e-1])/100},calFinaPer:function(e){if(-1===e){var t=this.stepData.length;return Math.floor(1e4*this.stepData[t-1]/this.stepData[0])/100}return Math.floor(1e4*this.stepData[e]/this.stepData[0])/100}},watch:{currentWebsite:function(){this.getEventData()},dateSelect1:function(){this.getEventData()},dateSelect2:function(){this.getConversionData()},conversionSelect:function(e){if(e){var t=[],a=[];this.conversionData[e][0].forEach(function(e){e&&t.push(e)}),this.conversionData[e][1].forEach(function(e){e&&a.push(e)}),this.stepName=t,this.stepData=a}}},mounted:function(){this.currentWebsite||(0!==this.websites.length?this.$store.commit("setCurrentWebsite",this.websites[0]):this.$router.push("/manage")),this.$emit("routerTo",2),this.getEventData(),this.getConversionData(),waTag("event","高级页面","访问","访问高级页面")}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",{staticClass:"title"},[e._v("自定义事件 "),a("i",{staticClass:"el-icon-question",on:{click:function(t){e.showEventDescribe=!e.showEventDescribe}}})]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.eventLoading,expression:"eventLoading"}],staticClass:"custom"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部事件",name:"all"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allEventData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"全部事件（类型+操作+标签）"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"事件总数",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ipCount",label:"唯一访客事件数",width:"200"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"类型",name:"cat"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.catEventData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"事件类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"事件总数",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ipCount",label:"唯一访客事件数",width:"200"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"操作",name:"act"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.actEventData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"事件操作"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"事件总数",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ipCount",label:"唯一访客事件数",width:"200"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"标签",name:"lab"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.labEventData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"事件标签"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"事件总数",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ipCount",label:"唯一访客事件数",width:"200"}})],1)],1)],1),e._v(" "),a("el-select",{staticClass:"date-select",model:{value:e.dateSelect1,callback:function(t){e.dateSelect1=t},expression:"dateSelect1"}},e._l(e.dateOptions1,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("h1",{staticClass:"title"},[e._v("转化分析 "),a("i",{staticClass:"el-icon-question",on:{click:function(t){e.showConversionDescribe=!e.showConversionDescribe}}})]),e._v(" "),a("div",{staticClass:"custom"},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.conversionLoading,expression:"conversionLoading"}],staticClass:"conversion-select",model:{value:e.conversionSelect,callback:function(t){e.conversionSelect=t},expression:"conversionSelect"}},e._l(e.conversionData,function(e,t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),e._v(" "),a("el-select",{staticClass:"date-select",model:{value:e.dateSelect2,callback:function(t){e.dateSelect2=t},expression:"dateSelect2"}},e._l(e.dateOptions2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),e._l(e.stepName,function(t,n){return a("div",{staticClass:"step clear"},[a("p",[e._v(e._s(t)),a("span",[e._v(e._s(e.stepData[n])+"次  转化率"+e._s(e.calStepPer(n))+"%")])]),e._v(" "),a("el-progress",{staticClass:"conversion-progress",attrs:{"show-text":!1,"stroke-width":50,percentage:e.calFinaPer(n)}})],1)}),e._v(" "),0!==e.stepData.length?a("div",{staticClass:"final"},[e._v("总转化率"+e._s(e.calFinaPer(-1))+"%")]):e._e()],2),e._v(" "),a("br"),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showEventDescribe,expression:"showEventDescribe"}],staticClass:"describe"},[a("div",{staticClass:"title"},[e._v("自定义事件"),a("span",{on:{click:function(t){e.showEventDescribe=!1}}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"content"},[a("h3",[e._v("API")]),e._v(" "),a("p",[e._v("waTag('event', 'category', 'action', 'opt_label', opt_value);")]),e._v(" "),a("h3",[e._v("功能介绍")]),e._v(" "),a("p",[e._v("用于触发某个事件，如点击某个按钮时，点击某个链接时，或播放器的播放/停止时。")]),e._v(" "),a("h3",[e._v("设置方法")]),e._v(" "),a("p",[e._v("在触发如点击/开始/停止/下载等事件时，在JS中调用事件跟踪代码。")]),e._v(" "),a("p",[e._v("参数说明：")]),e._v(" "),a("ul",[a("li",[e._v("event：固定字符串参数，表示此api用于跟踪事件。")]),e._v(" "),a("li",[e._v('category：必填字符串参数，要监控的目标的类型名称，通常是同一组目标的名字，如："按钮"、"button"、"视频"、"video"、"链接"、"link"等等。该项必填，中英文皆可，不填的事件会被抛弃。')]),e._v(" "),a("li",[e._v('action：必填字符串参数，用户跟目标交互的行为，如"点击"、"click"、"播放"、"暂停"、"下载"等等。该项必填，中英文皆可，不填的事件会被抛弃。')]),e._v(" "),a("li",[e._v("opt_label：可选字符串参数，事件的一些额外信息，通常可以是歌曲的名称、软件的名称、链接的名称等等。该项建议填写，中英文皆可，不填代表此项为空。")]),e._v(" "),a("li",[e._v("opt_value：可选数字参数，事件的一些数值信息，比如权重、时长、价格等等，在报表中可以看到其平均值等数据。该项可选。")])]),e._v(" "),a("h3",[e._v("举例")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("例如我们可以对某种类型的链接进行监控：")]),e._v(" "),a("p",[e._v("<a onclick=\"waTag('event', 'nav', 'click', 'literatur');\" href=\"http://www.example.com/literatur\"></a>")]),e._v(" "),a("p",[e._v('这样就可以在"自定义事件"分析中查看导航栏中，采用点击操作、且是关于文学内容链接的点击次数了')])]),e._v(" "),a("li",[a("p",[e._v('例如用户点击播放按钮会播放"Hey Jude"这首歌，那么在对应的事件处理函数中可以这样来监控播放或暂停事件：')]),e._v(" "),a("p",[e._v("waTag('event', 'video', 'play', 'Hey Jude');")]),e._v(" "),a("p",[e._v("waTag('event', 'video', 'pause', 'Hey Jude');")]),e._v(" "),a("p",[e._v('这样就可以在"自定义事件"分析中就能看到播放/暂停等事件的对应数据了')])]),e._v(" "),a("li",[a("p",[e._v('例如页面上有一个"千千静听"的下载链接，那么可以这样来监控下载事件：')]),e._v(" "),a("p",[e._v("<a id=\"download\" onclick=\"waTag('event', 'software', 'download', 'ttplayer');\" href=\"http://www.example.com/download/ttpsetup.exe\">下载</a>")]),e._v(" "),a("p",[e._v('这样就可以在"自定义事件"分析中就能看到下载事件的对应数据了')])])])])])]),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showConversionDescribe,expression:"showConversionDescribe"}],staticClass:"describe"},[a("div",{staticClass:"title"},[e._v("转化分析"),a("span",{on:{click:function(t){e.showConversionDescribe=!1}}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"content"},[a("h3",[e._v("API")]),e._v(" "),a("p",[e._v("waTag('conversion', 'name', 'step', queue);")]),e._v(" "),a("h3",[e._v("功能介绍")]),e._v(" "),a("p",[e._v("用于分析整个流程中各个阶段的转化情况。如注册流程、下单流程等。")]),e._v(" "),a("h3",[e._v("设置方法")]),e._v(" "),a("p",[e._v("在每个步骤发生时，在JS中调用转化跟踪代码。")]),e._v(" "),a("p",[e._v("参数说明：")]),e._v(" "),a("ul",[a("li",[e._v("conversion：固定字符串参数，表示此api用于跟踪转化。")]),e._v(" "),a("li",[e._v('name：必填唯一字符串参数，表示转化目标名，如："注册转化"、"订单转化"等等。该项必填，中英文皆可，不填的事件会被抛弃。')]),e._v(" "),a("li",[e._v('step：必填唯一字符串参数，表示在这个转化目标中的步骤名，如"首页"、"商品详情页"、"加入购物车"、"提交订单"、"支付订单"等等。该项必填，中英文皆可，不填的事件会被抛弃。')]),e._v(" "),a("li",[e._v("queue：必填唯一数字参数，表示在这个转化目标中的步骤顺序，从1开始逐步递增。该项必填，不填的事件会被抛弃。")])]),e._v(" "),a("h3",[e._v("举例")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("例如我们可以对用户注册转化进行分析，在每个步骤发生时加入对应的代码：")]),e._v(" "),a("p",[e._v("waTag('conversion', '注册转化', '首页', 1);")]),e._v(" "),a("p",[e._v("waTag('conversion', '注册转化', '注册页', 2);")]),e._v(" "),a("p",[e._v("waTag('conversion', '注册转化', '注册表单提交', 3);")]),e._v(" "),a("p",[e._v("waTag('conversion', '注册转化', '注册成功', 4);")]),e._v(" "),a("p",[e._v('这样就可以在"转化分析"中查看"注册转化"这个目标中每个阶段的转化率分析了。')])]),e._v(" "),a("li",[a("p",[e._v("例如我们可以对订单转化进行分析，在每个步骤发生时加入对应的代码：")]),e._v(" "),a("p",[e._v("waTag('conversion', '订单转化', '首页', 1);")]),e._v(" "),a("p",[e._v("waTag('conversion', '订单转化', '商品详情页', 2);")]),e._v(" "),a("p",[e._v("waTag('conversion', '订单转化', '加入购物车', 3);")]),e._v(" "),a("p",[e._v("waTag('conversion', '订单转化', '提交订单', 4);")]),e._v(" "),a("p",[e._v("waTag('conversion', '订单转化', '支付订单', 5);")]),e._v(" "),a("p",[e._v('这样就可以在"转化分析"中查看"订单转化"这个目标中每个阶段的转化率分析了。')])])])])])])],1)},staticRenderFns:[]};var r=a("VU/8")(v,c,!1,function(e){a("CtS/")},"data-v-cad7f2d6",null);t.default=r.exports},fZjL:function(e,t,a){e.exports={default:a("jFbC"),__esModule:!0}},jFbC:function(e,t,a){a("Cdx3"),e.exports=a("FeBl").Object.keys},uqUo:function(e,t,a){var n=a("kM2E"),s=a("FeBl"),l=a("S82l");e.exports=function(e,t){var a=(s.Object||{})[e]||Object[e],i={};i[e]=t(a),n(n.S+n.F*l(function(){a(1)}),"Object",i)}}});
//# sourceMappingURL=2.c3a8de2d689e90323cee.js.map